<% layout('layout') -%>
<% let title = 'Edit Pet' %>

<h2>Edit <%= pet.name %></h2>

<form action="/pets/<%= pet._id %>?_method=PUT" method="POST" class="pet-form">
    <div class="form-group">
        <label for="name">Pet Name *</label>
        <input type="text" id="name" name="name" value="<%= pet.name %>" required>
    </div>

    <div class="form-group">
        <label for="type">Pet Type *</label>
        <select id="type" name="type" required>
            <option value="Dog" <%= pet.type === 'Dog' ? 'selected' : '' %>>Dog</option>
            <option value="Cat" <%= pet.type === 'Cat' ? 'selected' : '' %>>Cat</option>
            <option value="Bird" <%= pet.type === 'Bird' ? 'selected' : '' %>>Bird</option>
            <option value="Fish" <%= pet.type === 'Fish' ? 'selected' : '' %>>Fish</option>
            <option value="Rabbit" <%= pet.type === 'Rabbit' ? 'selected' : '' %>>Rabbit</option>
            <option value="Hamster" <%= pet.type === 'Hamster' ? 'selected' : '' %>>Hamster</option>
            <option value="Other" <%= pet.type === 'Other' ? 'selected' : '' %>>Other</option>
        </select>
    </div>

    <div class="form-row">
        <div class="form-group">
            <label for="breed">Breed</label>
            <input type="text" id="breed" name="breed" value="<%= pet.breed || '' %>">
        </div>

        <div class="form-group">
            <label for="age">Age (years)</label>
            <input type="number" id="age" name="age" value="<%= pet.age || '' %>" min="0" step="0.5">
        </div>

        <div class="form-group">
            <label for="weight">Weight (kg)</label>
            <input type="number" id="weight" name="weight" value="<%= pet.weight || '' %>" min="0" step="0.1">
        </div>
    </div>

    <div class="form-row">
        <% const formatDate = (date) => date ? new Date(date).toISOString().split('T')[0] : ''; %>
        <div class="form-group">
            <label for="lastFed">Last Fed Date</label>
            <input type="date" id="lastFed" name="lastFed" value="<%= formatDate(pet.lastFed) %>">
        </div>

        <div class="form-group">
            <label for="lastVetVisit">Last Vet Visit</label>
            <input type="date" id="lastVetVisit" name="lastVetVisit" value="<%= formatDate(pet.lastVetVisit) %>">
        </div>
    </div>

    <div class="form-group">
        <label for="notes">Notes</label>
        <textarea id="notes" name="notes" rows="4"><%= pet.notes || '' %></textarea>
    </div>

    <div class="form-actions">
        <a href="/pets/<%= pet._id %>" class="btn btn-outline">Cancel</a>
        <button type="submit" class="btn btn-primary">Update Pet</button>
    </div>
</form>